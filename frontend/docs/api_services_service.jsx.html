<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: api/services/service.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: api/services/service.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* Importing the models. */
import userDataModel from "../models/userData";
import userActivityModel from "../models/userActivity";
import userAvgSessionsModel from "../models/userAvgSessions";
import userPerformanceModel from "../models/userPerformance";

/* Creating variables that represent the API URL, port as well as the complete API URL + port to make modifications easier.*/
const url = "http://localhost:";
const apiPort = "3000";
const apiURL = url + apiPort + "/";

/**
 * Returns the data fetched from the API or false if the API is unreachable
 * @param {string} id Id of the user we fetch the data from
 * @param {string} urlParam Endpoint of the API route used to fetch specific data
 * @return {object} Fetched data
 */
const fetchData = async (id, urlParam) => {
  // Variable that holds the entire API URI
  const fullUrl = apiURL + "user/" + id + "/" + urlParam;

  // We fetch the data from the API
  const getRequest = await fetch(fullUrl);

  // Data conversion to JSON
  const jsonResponse = await getRequest.json();

  // If an error is returned then the function returns false
  if (jsonResponse === "can not get user") {
    return false;
  }

  // Use of a key value object to tackle every possible API response
  // We create a new instance of the models to standardize the API response
  const route = {
    "": new userDataModel(
      jsonResponse.data.id,
      jsonResponse.data.userInfos,
      jsonResponse.data.todayScore || jsonResponse.data.score,
      jsonResponse.data.keyData
    ),
    activity: new userActivityModel(
      jsonResponse.data.userId,
      jsonResponse.data.sessions
    ),
    "average-sessions": new userAvgSessionsModel(
      jsonResponse.data.userId,
      jsonResponse.data.sessions
    ),
    performance: new userPerformanceModel(
      jsonResponse.data.userId,
      jsonResponse.data.kind,
      jsonResponse.data.data
    ),
  };
  // We return the newly created object depending on the key value determined by the url parameter (api endpoint)
  return route[urlParam];
};
export default fetchData;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Card">Card</a></li><li><a href="global.html#Dashboard">Dashboard</a></li><li><a href="global.html#displayContent">displayContent</a></li><li><a href="global.html#fetchData">fetchData</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#Homepage">Homepage</a></li><li><a href="global.html#invalidUser">invalidUser</a></li><li><a href="global.html#renderBarChart">renderBarChart</a></li><li><a href="global.html#renderLineChart">renderLineChart</a></li><li><a href="global.html#renderRadarChart">renderRadarChart</a></li><li><a href="global.html#renderRadialBarChart">renderRadialBarChart</a></li><li><a href="global.html#Sidebar">Sidebar</a></li><li><a href="global.html#userSummary">userSummary</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Thu Jun 02 2022 15:48:54 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
